<html>
<head>
   <script type = "text/javascript" src = "https://d3js.org/d3.v4.min.js"></script>
   <style>
      svg text {
         fill: royalblue;
         font: 12px sans-serif;
         text-anchor: end;
      }
   </style>
</head>

<body>
<script>
   //var data = [5, 5];
   //var data = [[21, 25, 25],[22, 25, 25, 30, 20],[25, 25]];

   var data =  [[{x: 1, y: 1, width: 60, height: 60, xyz: 'w:1장'}],
              [{x: 1, y: 61, width: 60, height: 60, xyz: '林潢-'},
               {x: 61, y: 61, width: 60, height: 60, xyz: '---/ㄴ/('},
               {x: 121, y: 61, width: 60, height: 60, xyz: '南'},
               {x: 181, y: 61, width: 60, height: 60, xyz: '-,'},
               {x: 241, y: 61, width: 60, height: 60, xyz: '潢/仲/--'},               
               {x: 301, y: 61, width: 60, height: 60, xyz: '-南-,'}]]

  console.log("data", data);

   var color = ["red", "blue", "pink", "gray"]
   
   var width = 500 
      scaleFactor = 20, 
      barHeight = 30;

   var graph = d3.select("body")
      .append("svg")
      .attr("width", width)
     // .attr("height", barHeight * data.length)
      .attr("height", 500)
      ;
   
   var row = graph.selectAll(".gRow")
      .data(data)
      .enter()
      .append("g")
      .attr("class", "gRow")
      //.attr("transform", function(d, i) {
      //return "translate(" + d*5 +"," + i * barHeight + ")";
      //return "translate(" + i*100 +", 0 )";  })
      ;

      // ok      
      console.log("row", row);
        
   var column = row.selectAll(".barRect")
      .data(function(d) { console.log("d", d); return d; })
      .enter();  

   console.log("col", column);
   column.append("rect")
      .attr("class", "barRect")
      .attr("x", function(d) { console.log(d); return d.x; })
      .attr("y", function(d) { return d.y; })
      .attr("width", function(d) { return d.width; })
      .attr("height", function(d) { return d.height; })
      .style("fill", "#fff")
      .style("stroke", "#222")
      ;

   column.append("text")
      .attr("x", function(d) { return d.x  + d.width/2; })
      .attr("y", function(d) { return d.y + d.height*1/4; })
      // .attr("y", height / 2)
      .attr("dy", ".35em")
      .text(function(d) { return d.xyz; })
      .style("text-anchor", "middle")
      .style("font-size", 18)
      .style("font-color", "red")
      ;

   /*   
      .attr("width", 100)   
      .attr("height", 100)
      .style("fill", "skyblue")
      .style("fill-opacity", 0.5);
*/
      
      //.style("fill", function(d,i) { return color[i];});
/*   
   bar.append("text")
      .attr("x", function(d) { return (d*scaleFactor); })
      .attr("y", barHeight / 2)
      .attr("dy", ".35em")
      .attr("dx", "-.50em")
      .text(function(d) { return d; });

    //var dataSet = [[21, 25, 25],[22, 25, 25, 30, 20],[25, 25]];
    //var dataSet = [25, 30, 50, 40]
    var dataSet = [[["임", 1/3], ["황", 1/3], ["-", 1/6], ["-", 1/6]],
                   [["중", 1/3], ["황", 1/3], ["-", 1/6], ["-", 1/6]]
                   ]

    //bar.append("g")
    //    .attr("class", "gSubbar");
/*
    var subar = bar.selectAll(".gSubbar")
      .data(dataSet)
      .enter()
      .append("g")
      .attr("class", "gSubbar");
      //.attr("transform", function(d, i) { 
      //return "translate(" + d*5 +"," + i * barHeight + ")";
      //return "translate(" + i*100 +", 0 )"  });  
    console.log("gSubbar", subar)
*/
/*
    var xx = bar.selectAll("subRect")
      .data(dataSet)
      .enter()
      //.append("g")
      //.attr("class", "gSubbar")
      .append("rect")
      .attr("class", "subRect")
      //.attr("x", function(d) { return d[1]; })
      //.attr("y", function(d) { return d[1]; })
      .attr("width", 25)   
      .attr("height", 25)
      .style("fill", "red");
      //.style("fill", function(d,i) { return color[i];});
    console.log(xx)
  /*
   var xx = graph.selectAll("rect")
      .transition()
      .delay(function(d,i){ console.log("d", d); return i*3000;})
      .attr("width", function(d) {
      // return d * scaleFactor})
      return 25})
      .duration(function(d, i) {
         return 5000});
  */
  
</script>

<!--script>
   var dataSet = [10, 5, 12, 15];
   console.log(dataSet)
   var xx = d3.selectAll("button")
   console.log(xx)
/*   
      .on("click",function() {
         console.log("sfsf");
/*
         d3.select("g")
            .selectAll("rect")
            .data(dataSet)
            .transition()
            .delay(function(d,i){return i*500;}) //순번 * 500밀리초 
            .attr("width",function(d,i){
               return d + "px";
         }) */
//   })
</script>   


<br>
<button id="update">업데이트</button>
<!-- <svg version="1.1" xmlns="http://www.w3.org/2000/svg"
   width="400" height="200" viewBox="0 0 400 200">
<g id="gid" transform="scale(1,-1) translate(0,-200)">
<rect x="50" y="0" fill="red" width="100" height="50">
<animate attributeName="height" from="0" to="50" dur="2s" fill="red" />
</rect>
<rect x="50" y="50" fill="blue" width="100" height="50" delay="4s">
<animate attributeName="height" from="0" to="50" dur="2s" fill="blue" />
</rect>
<rect x="50" y="100" fill="pink" width="100" height="200">
<animate attributeName="height" from="0" to="300" dur="2s" fill="pink" />
</rect>
</g>
</svg> -->

   </body>
</html>

<!--html lang = "en">
   <head>
      <title>SVG rectangle</title>
      <script type = "text/javascript" src = "https://d3js.org/d3.v4.min.js"></script>
      <script type = "text/javascript" src = "jquery-3.6.3.min.js"></script>
      <style>
         body { font-family: Arial; }
      </style>
   </head>

   <body>
      <div id = "svgcontainer"></div>
      사람 사는 세상!!   
      </div>
      <script src = "d3-transform.js"></script>
   </body>
</html-->

<!--html>
   <head>
      <script type = "text/javascript" src = "https://d3js.org/d3.v4.min.js"></script>
   </head>

   <body>
      <h3>Simple transitions</h3>
      <script>
        // d3.selectAll("h3").transition().style("color","blue").duration(5000);
        d3.selectAll("h3").transition().style("color","rgb(0,150,120)").duration(5000);
         d3.selectAll("h3").transition()
            .style("font-size","28px").delay(2000).duration(2000);
      </script>
   </body>
</html-->
